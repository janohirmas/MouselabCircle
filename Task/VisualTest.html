{{ extends "global/Page.html" }}

{{ block styles }}
    <style>
        #circle {
            width: 0px;
            height: 0px;
            position: absolute;
            transform: translate(-50%,-50%);
            top: 10vh;
            left: 10vw;
            border: 1px black solid;
            border-radius: 100%;
            background-color: rgb(0, 0, 0);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #mini-circle {
            width: 20%;
            height: 20%;
            border: 1px rgb(255, 100, 0) solid;
            display: flex;
            justify-content: center;
            align-items: top;
            border-radius: 100%;
            background-color: rgb(255, 100, 0);
        }

        #tiny-circle {
            width: 20%;
            height: 20%;
            border: 1px rgb(0,0,0) solid;
            border-radius: 100%;
            background-color: rgb(0,0,0);
            margin-top: 5%;
        }
    </style>
{{ endblock }}

{{ block script }}
    <script>
        var tStart, tEnd;
        var vChange     = [];
        const circle    =  document.getElementById('circle');
        const mcircle   = document.getElementById('mini-circle');
        const iDuration = 1500;
        const iStep     = 20;
        const iMaxSize  = 50;
        const vXpos     = [0.1, 0.5, 0.9, 0.9, 0.5, 0.1, 0.1, 0.5, 0.9];
        const vYpos     = [0.1, 0.1, 0.1, 0.5, 0.5, 0.5, 0.9, 0.9, 0.9];
        const dHeight   = window.innerHeight;
        const dWidth   = window.innerWidth;


        
        window.addEventListener('DOMContentLoaded', () => {
            tStart = new Date();
            CircleMovements();
            setInterval(() => {
                CircleResize();
            }, iStep);
            setTimeout(endPage,2*iDuration*vXpos.length);
        });

        function CircleMovements() {
            let iT;
            for (let i=1; i<vXpos.length;i++) {
                iT = 2*iDuration*i;
                setTimeout(() =>{
                    moveCircle(vXpos[i],vYpos[i]);
                },iT)
            }
        }
        
        function CircleResize() {
            let tNow        = new Date();
            let dT          = tNow - tStart;
            let dScale      = 20+(iMaxSize-20)*Math.abs(Math.sin(0.5*Math.PI*dT/iDuration));
            let dAngle      = dT*180/iDuration;
            resizeCircle(dScale)
            // rotateMini(dAngle)
        }

        function moveCircle(dX,dY) {
            // Find Circle and define new position:
            let dTop = dY*dHeight;
            let dLeft = dX*dWidth;
            // Replace
            circle.style.top = `${dTop}px`;
            circle.style.left = `${dLeft}px`;
        }

        function resizeCircle(dSize) {
            circle.style.width = `${dSize}px`;
            circle.style.height = `${dSize}px`;
        };

        function rotateMini(dAngle) {
            mcircle.style.transform = `rotate(${dAngle}deg)`;
        }




    </script>
{{ endblock }}



{{ block content }}

<div class="screen-content">
    <div id="circle"> 
        <div id="mini-circle"> 
            <!-- <div id="tiny-circle"> </div> -->
        </div> 
    </div>
</div>


<input type="hidden" id="sStart" name="sStartVisual">
<input type="hidden" id="sEnd" name="sEndVisual">
<button id='next-btn'> </button>


{{ endblock }}
